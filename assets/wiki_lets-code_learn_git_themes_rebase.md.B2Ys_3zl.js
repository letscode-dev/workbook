import{_ as c,C as i,o as p,c as u,aw as o,E as t,w as a,j as e,a as l}from"./chunks/framework.DLufY-ao.js";const d="/workbook/assets/rebase.DUXvwfjX.jpg",k=JSON.parse('{"title":"Перемещение веток (rebase)","description":"","frontmatter":{},"headers":[],"relativePath":"wiki/lets-code/learn/git/themes/rebase.md","filePath":"wiki/lets-code/learn/git/themes/rebase.md"}'),b={name:"wiki/lets-code/learn/git/themes/rebase.md"};function m(y,s,g,A,f,h){const n=i("v-details"),r=i("v-two");return p(),u("div",null,[s[5]||(s[5]=o(`<h1 id="перемещение-веток-rebase" tabindex="-1">Перемещение веток (rebase) <a class="header-anchor" href="#перемещение-веток-rebase" aria-label="Permalink to &quot;Перемещение веток (rebase)&quot;">​</a></h1><h3 id="описание" tabindex="-1">Описание <a class="header-anchor" href="#описание" aria-label="Permalink to &quot;Описание&quot;">​</a></h3><ul><li><code>rebase</code> позволяет взять все коммиты из одной ветки и применить их поверх другой</li><li>Выполняет работу аналогичную cherry-pick, только для цепочки коммитов, перенося ветку на новое место</li><li>Коммит, который не даёт изменений называется пустым. rebase автоматически пропускает этот коммит</li></ul><h3 id="rebase" tabindex="-1"><code>rebase</code> <a class="header-anchor" href="#rebase" aria-label="Permalink to &quot;\`rebase\`&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-light vp-code" tabindex="0"><code><span class="line"><span style="color:#4078F2;">git</span><span style="color:#50A14F;"> rebase</span><span style="color:#50A14F;"> master</span><span style="color:#A0A1A7;font-style:italic;">      # rebase</span></span>
<span class="line"><span style="color:#4078F2;">git</span><span style="color:#50A14F;"> rebase</span><span style="color:#986801;"> --continue</span><span style="color:#A0A1A7;font-style:italic;">  # продолжить rebase (вызывается при наличии конфликтов)</span></span>
<span class="line"><span style="color:#4078F2;">git</span><span style="color:#50A14F;"> rebase</span><span style="color:#986801;"> --skip</span><span style="color:#A0A1A7;font-style:italic;">      # пропустить коммит (вызывается при наличии конфликтов)</span></span>
<span class="line"><span style="color:#4078F2;">git</span><span style="color:#50A14F;"> rebase</span><span style="color:#986801;"> --abort</span><span style="color:#A0A1A7;font-style:italic;">     # отменить rebase (возвращает обратно HEAD - не изменит историю коммитов)</span></span></code></pre></div>`,5)),t(n,{title:"git rebase --continue"},{default:a(()=>[...s[0]||(s[0]=[e("p",null,[l("Флаг "),e("code",null,"--continue"),l(" позволяет продолжить rebase после фикса конфликта и перейти к следующему коммиту")],-1),e("div",{class:"language-bash"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"bash"),e("pre",{class:"shiki one-light vp-code",tabindex:"0"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Rebase develop в текущую ветку")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#4078F2"}},"git"),e("span",{style:{color:"#50A14F"}}," rebase"),e("span",{style:{color:"#50A14F"}}," develop")]),l(`
`),e("span",{class:"line"}),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Если есть конфликт, то открывается редактор для фикса")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# После фикса добавляются изменения в staged")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#4078F2"}},"git"),e("span",{style:{color:"#50A14F"}}," add"),e("span",{style:{color:"#50A14F"}}," .")]),l(`
`),e("span",{class:"line"}),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Продолжить Rebase и перейти к следующему коммиту")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#4078F2"}},"git"),e("span",{style:{color:"#50A14F"}}," rebase"),e("span",{style:{color:"#986801"}}," --continue")]),l(`
`),e("span",{class:"line"}),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Откроется редактор, где можно изменить название коммита")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# После закрытия редактора Rebase перейдет к следующему коммиту")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Если следующего коммита нет, то Rebase завершится")])])])],-1)])]),_:1}),t(n,{title:"git rebase --skip"},{default:a(()=>[...s[1]||(s[1]=[e("p",null,[l("Флаг "),e("code",null,"--skip"),l(" позволяет пропустить коммит из текущей ветки и взять изменения из "),e("em",null,"develop")],-1),e("div",{class:"language-bash"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"bash"),e("pre",{class:"shiki one-light vp-code",tabindex:"0"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Rebase develop в текущую ветку")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#4078F2"}},"git"),e("span",{style:{color:"#50A14F"}}," rebase"),e("span",{style:{color:"#50A14F"}}," develop")]),l(`
`),e("span",{class:"line"}),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Если есть конфликт, то открывается редактор для фикса")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Пропустить коммит из текущей ветки и перейти к следующему коммиту")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#4078F2"}},"git"),e("span",{style:{color:"#50A14F"}}," rebase"),e("span",{style:{color:"#986801"}}," --skip")])])])],-1)])]),_:1}),t(n,{title:"git rebase --abort"},{default:a(()=>[...s[2]||(s[2]=[e("p",null,[l("Флаг "),e("code",null,"--abort"),l(" позволяет вернусть состояние текушей ветки до rebase."),e("br"),l(" Маркер HEAD, будет перенесен обратно на текущую, а уже добавленные коммиты повиснут в воздухе (на них не будет указывать ни один указатель) и будут вскоре удалены.")],-1),e("div",{class:"language-bash"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"bash"),e("pre",{class:"shiki one-light vp-code",tabindex:"0"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Rebase develop в текущую ветку")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#4078F2"}},"git"),e("span",{style:{color:"#50A14F"}}," rebase"),e("span",{style:{color:"#50A14F"}}," develop")]),l(`
`),e("span",{class:"line"}),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Если есть конфликт, то открывается редактор для фикса")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A0A1A7","font-style":"italic"}},"# Откатиться в состояние до rebase")]),l(`
`),e("span",{class:"line"},[e("span",{style:{color:"#4078F2"}},"git"),e("span",{style:{color:"#50A14F"}}," rebase"),e("span",{style:{color:"#986801"}}," --abort")])])])],-1)])]),_:1}),s[6]||(s[6]=o(`<h3 id="интерактивныи-rebase" tabindex="-1">Интерактивный rebase <a class="header-anchor" href="#интерактивныи-rebase" aria-label="Permalink to &quot;Интерактивный rebase&quot;">​</a></h3><h3 id="rebase-i" tabindex="-1"><code>rebase -i</code> <a class="header-anchor" href="#rebase-i" aria-label="Permalink to &quot;\`rebase -i\`&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-light vp-code" tabindex="0"><code><span class="line"><span style="color:#A0A1A7;font-style:italic;"># Интерактивный rebase на другую ветку</span></span>
<span class="line"><span style="color:#4078F2;">git</span><span style="color:#50A14F;"> rebase</span><span style="color:#986801;"> -i</span><span style="color:#50A14F;"> master</span></span>
<span class="line"><span style="color:#A0A1A7;font-style:italic;"># Интерактивный rebase внутри ветки (изменить историю последних 3х коммитов)</span></span>
<span class="line"><span style="color:#4078F2;">git</span><span style="color:#50A14F;"> rebase</span><span style="color:#986801;"> -i</span><span style="color:#50A14F;"> HEAD~3</span></span></code></pre></div><ul><li>В начала rebase запустится окно редактора, где можно указать определенную команду для каждого коммита</li><li>При этом переписывается история коммитов - у каждого коммита будет новый хеш</li></ul><h4 id="команды" tabindex="-1">Команды <a class="header-anchor" href="#команды" aria-label="Permalink to &quot;Команды&quot;">​</a></h4><ul><li><code>pick</code> (p) - использовать коммит без изменений (по умолчанию)</li><li><code>reword</code> (r) - использовать текущий коммит с возможностью изменения сообщения коммита</li><li><code>drop</code> (d) - удаление коммита (вместо этого можно удалить строку с коммитом)</li><li><code>fixup</code> (f) - будет объединен с предыдущем коммитом в списке, но без изменения сообщения коммита</li></ul><hr><ul><li><code>squash</code> (s) - будет объединен с предыдущем коммитом в списке</li><li><code>edit</code> (e) - отредактировать коммит (когда git дойдёт до коммита, выполнится отстановка и git предложит выполнить действия)</li><li><code>exec</code> (x) - выполнить скрипт для указанного коммита</li><li><code>break</code> (b) - остановиться здесь (продолжить rebase позже с &#39;git rebase --continue&#39;)</li><li><code>label</code> (l) - добавить метку для текущего HEAD с заданным именем</li><li><code>reset</code> (t) - сбросить HEAD до указанной метки</li><li><code>merge</code> (m) - создать merge-commit, используя message исходного merge-commit (или однострочный, если исходный merge-commit не был указан)</li></ul><h3 id="алгоритм-работы" tabindex="-1">Алгоритм работы <a class="header-anchor" href="#алгоритм-работы" aria-label="Permalink to &quot;Алгоритм работы&quot;">​</a></h3><ul><li>Задача: загрузить изменения из <em>master</em> в <em>feature</em></li></ul>`,10)),t(r,null,{first:a(()=>[...s[3]||(s[3]=[e("div",{class:"tip custom-block"},[e("p",{class:"custom-block-title"},"0. Подготовка"),e("p",null,[l("Создание ветки "),e("em",null,"feature"),l(" и добавление коммитов в "),e("em",null,"master"),l(" и "),e("em",null,"feature")])],-1),e("ul",null,[e("li",null,[e("em",null,"feature"),l(" откалывается от "),e("em",null,"master")]),e("li",null,"В каждую ветку поочередно добавляются коммиты")],-1),e("p",null,[e("strong",null,"Порядок коммитов")],-1),e("ol",null,[e("li",null,[e("code",null,"master-0"),l(" - master")]),e("li",null,[e("code",null,"feature-1"),l(" - feature")]),e("li",null,[e("code",null,"master-1"),l(" - master")]),e("li",null,[e("code",null,"feature-2"),l(" - feature")]),e("li",null,[e("code",null,"master-2"),l(" - master")])],-1),e("div",{class:"tip custom-block"},[e("p",{class:"custom-block-title"},"1. Rebase"),e("p",null,[l("Создание новой ветки "),e("em",null,"feature'")])],-1),e("ul",null,[e("li",null,[l("Создается новая временная ветка "),e("em",null,"feature'"),l(" на основе актуального состояния "),e("em",null,"master")])],-1),e("div",{class:"tip custom-block"},[e("p",{class:"custom-block-title"},"2. Rebase"),e("p",null,[l("Копирование всех коммитов "),e("em",null,"feature"),l(" поверх текущей вершины "),e("em",null,"master"),l(" для временной ветки "),e("em",null,"feature'")])],-1),e("ul",null,[e("li",null,[l("Работает аналогично cherry-pick: последовательно берутся изменения каждого коммита из "),e("em",null,"feature"),l(" и применяются к вершине "),e("em",null,"master"),l(": для каждого из коммитов в "),e("em",null,"feature"),l(" берётся его дельта и сохраняется во временный файл")]),e("li",null,"Из каждого временного файла создается новый коммит с тем же автором и описанием, но другим хешем")],-1),e("div",{class:"tip custom-block"},[e("p",{class:"custom-block-title"},"3. Rebase"),e("p",null,[l("Перенос HEAD из ветки "),e("em",null,"feature"),l(" в ветку "),e("em",null,"feature'")])],-1),e("ul",null,[e("li",null,[l("После копирования коммитов, ссылка "),e("em",null,"feature"),l(" переносится на вершину новосозданной ветки "),e("em",null,"feature'")]),e("li",null,[l("Теперь ветка "),e("em",null,"feature'"),l(" (копия ветки "),e("em",null,"feature"),l(") основана на последнем состоянии "),e("em",null,"master")])],-1)])]),last:a(()=>[...s[4]||(s[4]=[e("img",{src:d,style:{width:"300px"}},null,-1)])]),_:1}),s[7]||(s[7]=o('<hr><h3 id="задание" tabindex="-1">Задание <a class="header-anchor" href="#задание" aria-label="Permalink to &quot;Задание&quot;">​</a></h3><details class="details custom-block"><summary>Пункты</summary><ol><li>Перейти на ветку <strong>master</strong><ul><li><code>git checkout master</code></li><li>(если вы уже на ветке <strong>master</strong>, то выполнять не нужно)</li></ul></li><li>Создать ветку от <strong>master</strong><ul><li><code>git checkout -b feature</code>, где <code>feature</code> - название ветки</li><li>(команду необходимо выполнять находясь в ветке <strong>master</strong>)</li></ul></li><li>Добавить 1 коммит в ветку <strong>feature</strong><ul><li>Добавить новый файл</li><li><code>git add .</code></li><li><code>git commit -m &#39;Message&#39;</code></li></ul></li><li>Вернуться на ветку <strong>master</strong><ul><li><code>git checkout master</code></li></ul></li><li>Добавить 1 коммит в <strong>master</strong><ul><li>Аналогично как для <strong>feature</strong></li></ul></li><li>Вернуться на ветку <strong>feature</strong><ul><li><code>git checkout feature</code></li></ul></li><li>Актуализировать ветку <strong>feature</strong> с <strong>master</strong><ul><li>Необходимо взять последние изменения с <strong>master</strong> и добавить в <strong>feature</strong></li><li><code>git rebase master</code></li></ul></li><li>Устранение конфликтов rebase - Конфликты могут возникнуть, если изменения коснулись одинаковых файлов в <strong>master</strong> и <strong>feature</strong> - При этом IDE (VSCode в моём случае) подсветит конфликтные файлы - <code>git add .</code> - добавить измеенные файлы в staged - <code>git rebase --continue</code> - если несколько коммитов, то преходим к фиксу следующего коммита</li></ol></details>',3))])}const F=c(b,[["render",m]]);export{k as __pageData,F as default};
